document.addEventListener('DOMContentLoaded',()=>{let e=0,t=!1,n='menu',o=0,a={about:0,projects:0,skills:0,contact:0};const s=document.querySelectorAll('.menu-item'),c=document.getElementById('coinSlot'),i=document.getElementById('credits'),l=document.getElementById('startOverlay'),r=document.getElementById('bootSequence'),d=document.getElementById('bootText'),u=document.getElementById('menuScreen'),m=document.getElementById('xpBar'),p=document.getElementById('xpValue'),f=document.getElementById('playerLevel'),h={about:document.getElementById('aboutSection'),projects:document.getElementById('projectsSection'),skills:document.getElementById('skillsSection'),contact:document.getElementById('contactSection')},g=document.getElementById('projectModal'),y=document.getElementById('modalTitle'),E=document.getElementById('modalDesc'),v=document.getElementById('modalClose'),b=document.getElementById('particles'),w=[{id:'basedman',name:'BASEDMAN',desc:'Full-stack platform with modern architecture. Built with React, Node.js, and PostgreSQL. Features user authentication, real-time updates, and responsive design.',icon:'üéØ',difficulty:'‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ',xp:300},{id:'havblink',name:'HAVBLINK',desc:'Maritime industry platform connecting shipping companies with port services. Includes booking system, tracking, and API integrations.',icon:'‚öì',difficulty:'‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ',xp:500},{id:'emmerys',name:'EMMERYS',desc:'Digital transformation for Danish bakery chain. E-commerce, loyalty program, and location finder with focus on UX.',icon:'ü•ê',difficulty:'‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ',xp:200},{id:'boos',name:'BOOS PLATFORM',desc:'Gaming and community platform with custom forums, event management, and user-generated content features.',icon:'üéÆ',difficulty:'‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ',xp:350},{id:'bitcoin',name:'BITCOIN GUIDE',desc:'Educational resource explaining Bitcoin fundamentals. Interactive tutorials, price tracking, and security guides.',icon:'‚Çø',difficulty:'‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ',xp:250},{id:'writing',name:'FREELANCE WRITING',desc:'Technical content creation business. SaaS blog posts, documentation, newsletters, and AI consulting services.',icon:'‚úçÔ∏è',difficulty:'‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ',xp:400}];function x(){for(let e=0;e<50;e++){let e=document.createElement('div');e.className='particle',e.style.left=Math.random()*100+'%',e.style.top=Math.random()*100+'%',e.style.animationDelay=Math.random()*10+'s',e.style.animationDuration=5+Math.random()*10+'s',b.appendChild(e)}}function k(t){e=Math.min(e+t,100),m.style.setProperty('--xp',e+'%'),p.textContent=e,e>=100&&(e=0,f.textContent=parseInt(f.textContent)+1,o+=100,m.style.setProperty('--xp','0%'),setTimeout(()=>k(0),500))}function S(){k(10),s.forEach((e,t)=>{e.classList.toggle('selected',t===o)}),s[o].scrollIntoView({behavior:'smooth',block:'nearest'})}function L(e){u.classList.add('hidden'),Object.values(h).forEach(e=>e.classList.add('hidden')),h[e].classList.remove('hidden'),n=e,a[e]||(k(25),a[e]=!0)}function M(){h[n].classList.add('hidden'),u.classList.remove('hidden'),n='menu'}function T(e){let t=w.find(t=>t.id===e);t&&(y.textContent=t.name,E.innerHTML=`<p>${t.desc}</p><div style="margin-top:1rem;color:var(--neon-cyan)">DIFFICULTY: ${t.difficulty}</div>`,g.classList.remove('hidden'),k(t.xp))}x(),c.addEventListener('click',()=>{let e=parseInt(i.textContent)+1;i.textContent=e.toString().padStart(2,'0'),i.style.animation='pulse .3s',setTimeout(()=>i.style.animation='',300)}),l.addEventListener('click',()=>{l.style.opacity='0',setTimeout(()=>{l.classList.add('hidden'),t=!0,function e(){let t=['BOOT SEQUENCE INITIATED...','LOADING KERNEL...','MOUNTING FILESYSTEMS...','INITIALIZING DISPLAY...','LOADING ASSETS...','WELCOME TO KENNETH XP v1.0'],n=0;function o(){n<t.length?(d.innerHTML+=t[n]+'<br>',n++,setTimeout(o,400)):setTimeout(()=>{r.classList.add('hidden'),u.classList.remove('hidden')},1e3)}o()}()},500)}),document.addEventListener('keydown',e=>{if(!t)return;if('Escape'===e.key){'menu'!==n?M():g.classList.add('hidden');return}if(!g.classList.contains('hidden')){if('b'===e.key||'x'===e.key)g.classList.add('hidden');return}if('menu'===n){if('ArrowUp'===e.key||'w'===e.key)e.preventDefault(),o=(o-1+s.length)%s.length,S();else if('ArrowDown'===e.key||'s'===e.key)e.preventDefault(),o=(o+1)%s.length,S();else if('Enter'===e.key||'z'===e.key||'a'===e.key){let e=s[o].dataset.section;L(e)}}else('b'===e.key||'x'===e.key||'Backspace'===e.key)&&M()}),s.forEach((e,t)=>{e.addEventListener('click',()=>{o=t,S(),L(e.dataset.section)})}),document.querySelectorAll('.project-card').forEach(e=>{e.addEventListener('click',()=>{T(e.dataset.project)})}),v.addEventListener('click',()=>{g.classList.add('hidden')}),document.querySelectorAll('.contact-item').forEach(e=>{e.addEventListener('click',t=>{if('downloadResume'===e.id){t.preventDefault();let e=document.createElement('a');e.href='data:text/plain;base64,S0VOTkVUSCBIQU5TRU4gUkVTVU1FCkFJIFN5c3RlbXMgQXJjaGl0ZWN0ICYgQ29udGVudCBTdHJhdGVnaXN0CgpDT05UQUNUOgotIGVtYWlsOiBrZW5uZXRoQGV4YW1wbGUuY29tCi0gZ2l0aHViOiBnaXRodWIuY29tL2tlbm5ldGgKLSBsaW5rZWRpbjogbGlua2VkaW4uY29tL2luL2tlbm5ldGgKCkVYUEVSVElTRToKLSBMb2NhbCBMTE1zIChMTSBTdHVkaW8pCi0gQUkgQWdlbnRzICYgV29ya2Zsb3dzCi0gVGVjaG5pY2FsIFdyaXRpbmcKLSBXZWIgRGV2ZWxvcG1lbnQKLSBDb250ZW50IEF1dG9tYXRpb24=',e.download='Kenneth_Hansen_Resume.txt',e.click(),k(50)}else k(parseInt(e.dataset.xp)||10)})});let C=document.getElementById('joystick'),A=document.getElementById('btnA'),D=document.getElementById('btnB');C.addEventListener('mousedown',()=>{C.classList.add('active')}),C.addEventListener('mouseup',()=>{C.classList.remove('active')}),C.addEventListener('mouseleave',()=>{C.classList.remove('active')}),A.addEventListener('click',()=>{if(t)if('menu'===n){let e=s[o].dataset.section;L(e)}else{let t=document.querySelector('.project-card:hover');t&&T(t.dataset.project)}}),D.addEventListener('click',()=>{t&&('menu'!==n?M():g.classList.add('hidden'))}),document.querySelectorAll('.skill-node').forEach(e=>{e.addEventListener('mouseenter',()=>{e.style.transform='scale(1.1)',k(5)}),e.addEventListener('mouseleave',()=>{e.style.transform=''})}),window.innerWidth<=768&&document.getElementById('mobileControls').classList.remove('hidden'),console.log('üéÆ KENNETH XP v1.0 - INSERT COIN TO CONTINUE'),console.log('Controls: ‚Üë‚Üì‚Üê‚Üí or WASD to navigate, Z/A to select, X/B to go back')});